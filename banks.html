<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Banks â€” Income & Expense</title>
<style>
  body {
    font-family: Inter, Arial;
    background: #071024;
    color: #e6eef6;
    margin: 18px;
  }
  .card {
    background: #07182a;
    padding: 14px;
    border-radius: 10px;
    margin-bottom: 12px;
  }
  input, select {
    padding: 8px;
    border-radius: 6px;
    border: 1px solid rgba(247, 239, 239, 0.04);
    background: transparent;
    color: inherit;
    width: 100%;
  }
  button {
    padding: 8px 10px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
  }

  /* ðŸ”¹ Navigation links styling */
 nav a{
    color:var(--muted);
    text-decoration:none;
    margin:0 6px;
    font-size:14px;
  }
  nav a:hover{
    color:var(--accent);
  }
  /* <- fixed block starts here -> */
  header h2{
    font-weight:600;
    /* gradient background used as text color */
    background:linear-gradient(90deg,var(--accent),#7dd3fc);
    /* vendor-prefixed and standard property */
    -webkit-background-clip: text;
    background-clip: text;
    /* make the gradient show through the text */
    -webkit-text-fill-color: transparent;
    /* ensure element can receive the background clipping reliably */
    display: inline-block;
    margin:0;
  }
  /* <- fixed block ends here -> *
</style>

<style>
  body{font-family:Inter,Arial;background:#071024;color:#e6eef6;margin:18px}
  .card{background:#07182a;padding:14px;border-radius:10px;margin-bottom:12px}
  label{display:block;margin-top:6px}

  /* inputs / selects */
  input,select{
    padding:8px;
    border-radius:6px;
    border:1px solid rgba(255,255,255,0.04);
    background:#1d1f22;
    color:inherit;
    width:100%;
    box-sizing:border-box;
  }

  /* Placeholder color (light gray) - cross-browser */
  ::-webkit-input-placeholder { color: #bfc8d6; opacity: 1; } /* Chrome/Edge/Safari */
  :-ms-input-placeholder { color: #bfc8d6; } /* IE 10+ */
  ::-ms-input-placeholder { color: #bfc8d6; } /* Microsoft Edge */
  ::-moz-placeholder { color: #bfc8d6; opacity: 1; } /* Firefox 19+ */
  :-moz-placeholder { color: #bfc8d6; opacity: 1; } /* Firefox 4 - 18 */
  ::placeholder { color: #bfc8d6; opacity: 1; } /* Standard */

  button{padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
</style>
</head>
<body>
  <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <h2>Bank Accounts</h2>
    <nav>
      <a href="index.html">Dashboard</a> |
      <a href="banks.html">Banks</a> |
      <a href="transactions.html">Transactions</a>
    </nav>
  </header>

  <div class="card">
    <strong>Manage Banks</strong>
    <div style="margin-top:8px;display:flex;gap:8px">
      <input id="newBankName" placeholder="New bank name" />
      <button id="addBankBtn">Add</button>
    </div>
    <div style="margin-top:8px" id="banksArea"></div>
  </div>

  <div class="card">
    <strong>Intra-bank Transfer</strong>
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;margin-top:8px">
      <div>
        <label>From</label>
        <select id="transferFrom"></select>
      </div>
      <div>
        <label>To</label>
        <select id="transferTo"></select>
      </div>
      <div>
        <label>Amount (â‚¹)</label>
        <input id="transferAmt" type="number" step="0.01" />
      </div>
    </div>
    <div style="margin-top:8px;display:flex;gap:8px">
      <input id="transferDate" placeholder="DD-MM-YYYY" />
      <input id="transferNotes" placeholder="Optional note" />
      <button id="doTransfer">Transfer</button>
    </div>
  </div>

  <script src="data.js"></script>
  <script>
    function $id(a){return document.getElementById(a);}
    function render(){
      const st = DataStore.getState();
      const banks = DataStore.balancesPerBank();
      const area = $id('banksArea'); area.innerHTML='';
      banks.forEach(b=>{
        const div = document.createElement('div'); div.style.display='flex'; div.style.justifyContent='space-between'; div.style.padding='8px';
        div.style.borderBottom='1px dashed rgba(255,255,255,0.03)'; div.innerHTML = `<div><strong>${escape(b.name)}</strong><div style='font-size:12px;color:#9aa4b2'>${b.count} txns</div></div><div style='text-align:right'><div>${fmtAmt(b.balance)}</div><div style='font-size:12px;color:#9aa4b2'>inc ${fmtAmt(b.income)} â€¢ exp ${fmtAmt(b.expense)}</div></div>`;
        area.appendChild(div);
      });

      // selects
      ['transferFrom','transferTo'].forEach(selId=>{
        const sel = $id(selId); sel.innerHTML='';
        const opt0 = document.createElement('option'); opt0.value=''; opt0.textContent='Unassigned'; sel.appendChild(opt0);
        st.banks.forEach(b=>{ const o=document.createElement('option'); o.value=b.id; o.textContent=b.name; sel.appendChild(o); });
      });
    }

    // add bank
    $id('addBankBtn').addEventListener('click', ()=>{
      const name = $id('newBankName').value.trim(); if(!name) return; DataStore.addBank(name); $id('newBankName').value=''; render();
    });

    // transfer
    $id('doTransfer').addEventListener('click', ()=>{
      const from = $id('transferFrom').value || null; const to = $id('transferTo').value || null; const amt = Number($id('transferAmt').value) || 0; const date = $id('transferDate').value ? new Date($id('transferDate').value).toISOString() : new Date().toISOString(); const notes = $id('transferNotes').value.trim();
      if(!amt || amt<=0){ alert('Enter positive amount'); return; }
      if(from === to){ if(!(from==='' && to==='')){ alert('Select different banks for transfer'); return; } }
      DataStore.transfer(from, to, amt, date, notes);
      alert('Transfer complete'); render();
    });

    function escape(s){ if(s==null) return ''; return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    // initial
    render(); window.addEventListener('focus', render);
  </script>
</body>
</html>
